{"ast":null,"code":"import { decorate, observable, action, runInAction } from \"mobx\";\nimport Api from \"../api/index\";\nimport Card from \"../models/Card\";\n\nclass OpenStore {\n  constructor(rootStore) {\n    this.cards = [];\n    this.selectedCard = \"LPcVmOdZ9\";\n    this.answer = false;\n\n    this.getCards = () => {\n      this.api.getAllCards().then(newCards => {\n        if (newCards.length > 0) {\n          newCards.forEach(newCard => this._addCard(newCard));\n        }\n      });\n    };\n\n    this._addCard = values => {\n      const card = new Card(this.rootStore);\n      card.updateFromServer(values);\n      runInAction(() => this.cards.push(card));\n    };\n\n    this.addCard = card => {\n      console.log(\"SOKKET TEST\", card); //const card = new Card(this.rootStore);\n\n      this.cards.push(card);\n    };\n\n    this.showCard = () => {\n      const card = this.cards.filter(obj => {\n        return obj.uniqueId === this.selectedCard;\n      });\n      return card[0];\n    };\n\n    this.rootStore = rootStore;\n    this.api = new Api(`cards`);\n    this.socket = rootStore.uiStore.socket;\n    this.getCards();\n    this.socket.on(`getCard`, this.addCard);\n  }\n\n}\n\ndecorate(OpenStore, {\n  cards: observable,\n  selectedCard: observable,\n  getCards: action,\n  showCard: action\n});\nexport default OpenStore;","map":{"version":3,"sources":["/Users/kacimfedjkhi/stack/BAP/DEV/installation/nextInstallation/next-installation/client/src/store/OpenStore.js"],"names":["decorate","observable","action","runInAction","Api","Card","OpenStore","constructor","rootStore","cards","selectedCard","answer","getCards","api","getAllCards","then","newCards","length","forEach","newCard","_addCard","values","card","updateFromServer","push","addCard","console","log","showCard","filter","obj","uniqueId","socket","uiStore","on"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,UAAnB,EAA+BC,MAA/B,EAAuCC,WAAvC,QAA0D,MAA1D;AACA,OAAOC,GAAP,MAAgB,cAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;;AAEA,MAAMC,SAAN,CAAgB;AAKdC,EAAAA,WAAW,CAACC,SAAD,EAAY;AAAA,SAJvBC,KAIuB,GAJf,EAIe;AAAA,SAHvBC,YAGuB,GAHR,WAGQ;AAAA,SAFvBC,MAEuB,GAFd,KAEc;;AAAA,SAQvBC,QARuB,GAQZ,MAAM;AACf,WAAKC,GAAL,CAASC,WAAT,GAAuBC,IAAvB,CAA4BC,QAAQ,IAAI;AACtC,YAAIA,QAAQ,CAACC,MAAT,GAAkB,CAAtB,EAAyB;AACvBD,UAAAA,QAAQ,CAACE,OAAT,CAAiBC,OAAO,IAAI,KAAKC,QAAL,CAAcD,OAAd,CAA5B;AACD;AACF,OAJD;AAKD,KAdsB;;AAAA,SAgBvBC,QAhBuB,GAgBZC,MAAM,IAAI;AACnB,YAAMC,IAAI,GAAG,IAAIjB,IAAJ,CAAS,KAAKG,SAAd,CAAb;AACAc,MAAAA,IAAI,CAACC,gBAAL,CAAsBF,MAAtB;AACAlB,MAAAA,WAAW,CAAC,MAAM,KAAKM,KAAL,CAAWe,IAAX,CAAgBF,IAAhB,CAAP,CAAX;AACD,KApBsB;;AAAA,SAsBvBG,OAtBuB,GAsBbH,IAAI,IAAI;AAChBI,MAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BL,IAA3B,EADgB,CAEhB;;AACA,WAAKb,KAAL,CAAWe,IAAX,CAAgBF,IAAhB;AACD,KA1BsB;;AAAA,SA4BvBM,QA5BuB,GA4BZ,MAAM;AACf,YAAMN,IAAI,GAAG,KAAKb,KAAL,CAAWoB,MAAX,CAAkBC,GAAG,IAAI;AACpC,eAAOA,GAAG,CAACC,QAAJ,KAAiB,KAAKrB,YAA7B;AACD,OAFY,CAAb;AAIA,aAAOY,IAAI,CAAC,CAAD,CAAX;AACD,KAlCsB;;AACrB,SAAKd,SAAL,GAAiBA,SAAjB;AACA,SAAKK,GAAL,GAAW,IAAIT,GAAJ,CAAS,OAAT,CAAX;AACA,SAAK4B,MAAL,GAAcxB,SAAS,CAACyB,OAAV,CAAkBD,MAAhC;AACA,SAAKpB,QAAL;AACA,SAAKoB,MAAL,CAAYE,EAAZ,CAAgB,SAAhB,EAA0B,KAAKT,OAA/B;AACD;;AAXa;;AA0ChBzB,QAAQ,CAACM,SAAD,EAAY;AAClBG,EAAAA,KAAK,EAAER,UADW;AAElBS,EAAAA,YAAY,EAAET,UAFI;AAGlBW,EAAAA,QAAQ,EAAEV,MAHQ;AAIlB0B,EAAAA,QAAQ,EAAE1B;AAJQ,CAAZ,CAAR;AAOA,eAAeI,SAAf","sourcesContent":["import { decorate, observable, action, runInAction } from \"mobx\";\nimport Api from \"../api/index\";\nimport Card from \"../models/Card\";\n\nclass OpenStore {\n  cards = [];\n  selectedCard = \"LPcVmOdZ9\";\n  answer = false;\n\n  constructor(rootStore) {\n    this.rootStore = rootStore;\n    this.api = new Api(`cards`);\n    this.socket = rootStore.uiStore.socket;\n    this.getCards();\n    this.socket.on(`getCard`, this.addCard);\n  }\n\n  getCards = () => {\n    this.api.getAllCards().then(newCards => {\n      if (newCards.length > 0) {\n        newCards.forEach(newCard => this._addCard(newCard));\n      }\n    });\n  };\n\n  _addCard = values => {\n    const card = new Card(this.rootStore);\n    card.updateFromServer(values);\n    runInAction(() => this.cards.push(card));\n  };\n\n  addCard = card => {\n    console.log(\"SOKKET TEST\", card);\n    //const card = new Card(this.rootStore);\n    this.cards.push(card);\n  };\n\n  showCard = () => {\n    const card = this.cards.filter(obj => {\n      return obj.uniqueId === this.selectedCard;\n    });\n\n    return card[0];\n  };\n}\n\ndecorate(OpenStore, {\n  cards: observable,\n  selectedCard: observable,\n  getCards: action,\n  showCard: action\n});\n\nexport default OpenStore;\n"]},"metadata":{},"sourceType":"module"}